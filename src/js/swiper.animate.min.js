//本插件由www.swiper.com.cn提供
//版本1.03
function swiperAnimateCache(a) {
	for (j = 0; j < a.slides.length; j++)
		for (allBoxes = a.slides[j].querySelectorAll(".ani"), i = 0; i < allBoxes.length; i++) allBoxes[i].attributes["style"] ? allBoxes[i].setAttribute("swiper-animate-style-cache", allBoxes[i].attributes["style"].value) : allBoxes[i].setAttribute("swiper-animate-style-cache", " "), allBoxes[i].style.visibility = "hidden"
}

function swiperAnimate(a) {
	clearSwiperAnimate(a);
	var b = a.slides[a.activeIndex].querySelectorAll(".ani");
	for (i = 0; i < b.length; i++) {
		item = b[i];
		item.style.visibility = "visible";

		effect = item.attributes["swiper-animate-effect"] ? item.attributes["swiper-animate-effect"].value : "";
		style = item.attributes["style"].value;
		item.className = item.className + "  " + effect + " " + "animated";

		duration = item.attributes["swiper-animate-duration"] ? item.attributes["swiper-animate-duration"].value : "";
		duration && (style = style + "animation-duration:" + duration + ";-webkit-animation-duration:" + duration + ";");

		fn = item.attributes["swiper-animate-fn"] ? item.attributes["swiper-animate-fn"].value : "";
		fn && (style = style + "animation-timing-function:" + fn + ";-webkit-animation-timing-function:" + fn + ";");

		delay = item.attributes["swiper-animate-delay"] ? item.attributes["swiper-animate-delay"].value : "";
		delay && (style = style + "animation-delay:" + delay + ";-webkit-animation-delay:" + delay + ";");

		count = item.attributes["swiper-animate-count"] ? item.attributes["swiper-animate-count"].value : "1";
		count && (style = style + "animation-iteration-count:" + count + ";-webkit-animation-iteration-count:" + count + ";");

		item.setAttribute("style", style);
	}
}

function clearSwiperAnimate(a) {
	for (j = 0; j < a.slides.length; j++)
		for (allBoxes = a.slides[j].querySelectorAll(".ani"), i = 0; i < allBoxes.length; i++) allBoxes[i].attributes["swiper-animate-style-cache"] && allBoxes[i].setAttribute("style", allBoxes[i].attributes["swiper-animate-style-cache"].value), allBoxes[i].style.visibility = "hidden", allBoxes[i].className = allBoxes[i].className.replace("animated", " "), allBoxes[i].attributes["swiper-animate-effect"] && (effect = allBoxes[i].attributes["swiper-animate-effect"].value, allBoxes[i].className = allBoxes[i].className.replace(effect, " "))
}

module.exports = {
	swiperAnimateCache,
	swiperAnimate
};